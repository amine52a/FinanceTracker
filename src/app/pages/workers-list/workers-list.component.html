<app-sidebar></app-sidebar>
<div class="main-content">
  <div class="md-toolbar md-tall">
    <div class="md-toolbar-tools">
      <div class="md-toolbar-item md-breadcrumb" *ngIf="!toggleSearch" (click)="toggleSearch = true">
        Workers List
      </div>
      <div *ngIf="toggleSearch" style="padding-left: 88px; flex: 1;">
        <input
          type="text"
          placeholder="Search workers"
          (input)="applyFilter($event)"
          style="width: 100%; padding: 8px;"
        />
      </div>
      <button class="md-button md-default-theme" (click)="toggleSearch = !toggleSearch">
        <i class="ion-android-search"></i>
      </button>
    </div>
  </div>

  <table mat-table [dataSource]="dataSource" matSort class="md-table mat-elevation-z2" style="width: 100%;">

    <!-- Name Column -->
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef mat-sort-header class="md-table-header">Name</th>
      <td mat-cell *matCellDef="let worker" class="md-table-content">{{ worker.name }}</td>
    </ng-container>

    <!-- Company Column -->
    <ng-container matColumnDef="company">
      <th mat-header-cell *matHeaderCellDef mat-sort-header class="md-table-header">Company</th>
      <td mat-cell *matCellDef="let worker" class="md-table-content">
        {{ worker.companyId?.name || 'No company' }}
      </td>
    </ng-container>

    <!-- Position Column -->
    <ng-container matColumnDef="position">
      <th mat-header-cell *matHeaderCellDef mat-sort-header class="md-table-header">Position</th>
      <td mat-cell *matCellDef="let worker" class="md-table-content">{{ worker.position }}</td>
    </ng-container>

    <!-- Salary Column -->
    <ng-container matColumnDef="salary">
      <th mat-header-cell *matHeaderCellDef mat-sort-header class="md-table-header">Salary</th>
      <td mat-cell *matCellDef="let worker" class="md-table-content">{{ worker.salary | currency }}</td>
    </ng-container>

    <!-- Hire Date Column -->
    <ng-container matColumnDef="hireDate">
      <th mat-header-cell *matHeaderCellDef mat-sort-header class="md-table-header">Hire Date</th>
      <td mat-cell *matCellDef="let worker" class="md-table-content">{{ worker.hireDate | date:'mediumDate' }}</td>
    </ng-container>

    <!-- Email Column -->
    <ng-container matColumnDef="email">
      <th mat-header-cell *matHeaderCellDef mat-sort-header class="md-table-header">Email</th>
      <td mat-cell *matCellDef="let worker" class="md-table-content">{{ worker.email }}</td>
    </ng-container>

    <!-- Actions Column -->
    <ng-container matColumnDef="actions">
      <th mat-header-cell *matHeaderCellDef class="md-table-header"></th>
      <td mat-cell *matCellDef="let worker" class="md-table-content">
        <button mat-button color="primary">Details</button>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns" class="md-table-headers-row"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="md-table-content-row"></tr>
  </table>

  <div
    class="md-table-footer"
    style="display: flex; align-items: center; justify-content: space-between; padding: 0 32px; margin-top: 16px;"
  >
    <div class="md-table-count-info">
      Rows per page:
      <a href="#" (click)="changePageSize(10); $event.preventDefault()">10</a>,
      <a href="#" (click)="changePageSize(25); $event.preventDefault()">25</a>,
      <a href="#" (click)="changePageSize(50); $event.preventDefault()">50</a>,
      <a href="#" (click)="changePageSize(100); $event.preventDefault()">100</a>
      (current is {{ pageSize }})
    </div>

    <div *ngIf="pageSize > 0" style="display: flex; align-items: center;">
      <button
        class="md-button md-primary md-hue-2"
        [disabled]="pageIndex === 0"
        (click)="previousPage()"
        aria-label="Previous Page"
      >
        <i class="ion-chevron-left" style="font-size: 16px;"></i>
      </button>

      <button
        class="md-button md-primary md-hue-2 md-table-footer-item"
        style="margin: 0 4px;"
        (click)="goToPage(pageIndex)"
      >
        {{ pageIndex + 1 }}
      </button>

      <button
        class="md-button md-primary md-hue-2"
        (click)="nextPage()"
        aria-label="Next Page"
      >
        <i class="ion-chevron-right" style="font-size: 16px;"></i>
      </button>
    </div>
  </div>
</div>